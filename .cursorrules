# CANON RULES (Enforced by CI: npm run verify)

## ABSOLUTE PROHIBITIONS
- No TODO/FIXME/STUB/HACK/placeholder comments
- No `as any`, `as unknown`, non-null `!` assertions
- No `process.env.X || ""` - use src/env.ts with Zod
- No string literals where enum exists - use src/domain/enums.ts
- No duplicate types across files - use src/domain/types.ts
- No .map/.filter/.reduce inside JSX return blocks
- No hardcoded ports (3000, 5000, 8080) - use port_manager
- No empty function bodies or stub implementations
- No claiming "works" without npm run verify passing

## REQUIRED PATTERNS

### Ports & Startup
- Copy templates/port_manager.py or templates/port_manager.js
- Follow templates/dev_startup.js orchestration pattern
- Sequence: backend → health check → frontend → health check → browser
- All processes silent (no popups)

### Types & Enums
- All shared enums: src/domain/enums.ts (single source)
- All shared types: src/domain/types.ts (single source)
- UI imports from src/domain/* only (no redefinition)

### Environment
- All env vars validated via src/env.ts (Zod schema)
- Import { env } from "@/env" - never raw process.env

### Responsive/Mobile
- Import templates/responsive.css variables
- Use CSS custom properties (--space-*, --font-*)
- Test: 1920px, 2560px, 3840px + mobile breakpoints
- Touch targets: minimum 44x44px

### Backend
- Every backend exposes GET /health → 200 { status: "ok" }

## STOP CONDITION
If you cannot comply exactly:
```
BLOCKED
Reason: [why]
Rule violated: [which]
Missing: [what]
```
No further work until resolved.

## OUTPUT REQUIREMENTS
Every code response ends with:
```
✅ VERIFY: npm run verify passes
- Stubs: None
- Forbidden patterns: None
- Imports: Complete
```

## CI PIPELINE
```bash
npm run verify
# Runs: lint → typecheck → guard:jsx → build
```
